<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cash Register Counter</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    :root{
        --bg-main:#f4f4f4;
        --bg-card:#fff;
        --color-primary:#28a745;
        --color-danger:#dc3545;
        --color-report:#0069d9;
        --color-dark:#333;
        --color-muted:#666;
        --shadow:0 0 10px rgba(0,0,0,.1);
        --radius:8px;
        --radius-sm:4px;
    }
    body{
        font-family:Arial,Helvetica,sans-serif;
        background:var(--bg-main);
        display:flex;
        justify-content:center;
        align-items:flex-start;
        margin:0;
        padding:0;
    }
    .container{
        background:var(--bg-card);
        padding:20px;
        border-radius:var(--radius);
        box-shadow:var(--shadow);
        width:90%;
        max-width:600px;
        box-sizing:border-box;
    }
    @media (max-width:768px){
        .container{
            width:100%;
            max-width:none;
            border-radius:0;
        }
    }
    h1,h2,h3{color:var(--color-dark);text-align:center;}
    p{color:var(--color-muted);text-align:center;margin-bottom:20px;}
    .denomination-group{
        border-bottom:1px solid #ddd;
        padding-bottom:20px;
        margin-bottom:20px;
    }
    .input-row{
        display:flex;
        flex-wrap:wrap;
        justify-content:space-between;
        align-items:center;
        margin-bottom:15px;
    }
    label{
        font-weight:bold;
        flex:1 0 45%;
        min-width:70px;
    }
    input[type="number"]{
        flex:1 0 45%;
        max-width:120px;
        padding:8px;
        border:1px solid #ccc;
        border-radius:var(--radius-sm);
        font-size:16px;
        text-align:right;
        -moz-appearance:textfield;
        box-sizing:border-box;
    }
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button{
        -webkit-appearance:none;margin:0;
    }
    input:focus{outline:2px solid #007bff;}
    .total-container,
    .extra-emails{
        text-align:center;
        margin-top:20px;
    }
    #total, #removed-amount{
        font-size:2.2rem;
        font-weight:bold;
        color:var(--color-primary);
        background:#e9f5ee;
        padding:10px 15px;
        border-radius:6px;
        display:inline-block;
        min-width:130px;
    }
    #removed-amount { /* Style the removed amount slightly different for visibility */
        font-size: 1.8rem;
        color: var(--color-danger);
        background: #f8e9e9;
        margin-top: 10px;
    }
    .keep-register-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 20px 0 10px;
        padding: 10px 0;
        border-top: 1px solid #eee;
    }
    .keep-register-row label {
        font-size: 1.1rem;
        font-weight: bold;
        flex: 1;
        text-align: left;
    }
    .keep-register-row input[type="number"] {
        flex: 0 0 120px;
        max-width: 120px;
        font-size: 1.1rem;
    }
    button{
        background:var(--color-danger);
        color:#fff;
        border:none;
        padding:10px 15px;
        font-size:1rem;
        border-radius:var(--radius-sm);
        cursor:pointer;
        margin-top:10px;
        transition:background .3s;
    }
    button:hover{background:#c82333;}
    .email-btn{background:var(--color-report);}
    .email-btn:hover{background:#0056b3;}
    textarea{
        width:100%;
        height:120px;
        margin-top:10px;
        font-family:monospace;
        resize:none;
    }
    .extra-emails{
        display:none;
        margin-top:10px;
    }
    .extra-emails input{
        width:100%;
        padding:6px;
        border:1px solid #ccc;
        border-radius:var(--radius-sm);
        box-sizing:border-box;
    }
</style>
</head>
<body>
<div class="container">
    <h1>Cash Register Counter</h1>
    <p>Enter the number of bills and coins for each denomination to get the total.</p>
    <form id="cash-form" autocomplete="off">
        <div class="denomination-group">
            <h2>Bills</h2>
            <div class="input-row"><label for="hundreds">$100:</label><input type="number" id="hundreds" min="0" value="0"></div>
            <div class="input-row"><label for="fifties">$50:</label><input type="number" id="fifties" min="0" value="0"></div>
            <div class="input-row"><label for="twenties">$20:</label><input type="number" id="twenties" min="0" value="0"></div>
            <div class="input-row"><label for="tens">$10:</label><input type="number" id="tens" min="0" value="0"></div>
            <div class="input-row"><label for="fives">$5:</label><input type="number" id="fives" min="0" value="0"></div>
            <div class="input-row"><label for="ones">$1:</label><input type="number" id="ones" min="0" value="0"></div>
        </div>
        <div class="denomination-group">
            <h2>Coin Rolls</h2>
            <div class="input-row"><label for="quarter-rolls">Quarter rolls ($10 each):</label><input type="number" id="quarter-rolls" min="0" value="0"></div>
            <div class="input-row"><label for="dime-rolls">Dime rolls ($5 each):</label><input type="number" id="dime-rolls" min="0" value="0"></div>
            <div class="input-row"><label for="nickel-rolls">Nickel rolls ($2 each):</label><input type="number" id="nickel-rolls" min="0" value="0"></div>
            <div class="input-row"><label for="penny-rolls">Penny rolls ($0.50 each):</label><input type="number" id="penny-rolls" min="0" value="0"></div>
        </div>
        <div class="denomination-group">
            <h2>Coins</h2>
            <div class="input-row"><label for="quarters">Quarters ($0.25):</label><input type="number" id="quarters" min="0" value="0"></div>
            <div class="input-row"><label for="dimes">Dimes ($0.10):</label><input type="number" id="dimes" min="0" value="0"></div>
            <div class="input-row"><label for="nickels">Nickels ($0.05):</label><input type="number" id="nickels" min="0" value="0"></div>
            <div class="input-row"><label for="pennies">Pennies ($0.01):</label><input type="number" id="pennies" min="0" value="0"></div>
        </div>
        <div class="denomination-group">
            <h2>Checks</h2>
            <div class="input-row"><label for="checks">Checks Amount ($):</label><input type="number" id="checks" min="0.00" value="0.00" step="0.01"></div>
        </div>
        <div class="total-container">
            <h3>Total Amount in Register:</h3>
            <div id="total">$0.00</div>
            
            <div class="keep-register-row">
                <label for="keep-in-register">Keep in Register ($):</label>
                <input type="number" id="keep-in-register" min="0.00" value="0.00" step="0.01">
            </div>
            
            <h3>Amount to be Removed:</h3>
            <div id="removed-amount">$0.00</div>

            <br>
            <button type="button" id="clear-button">Clear All</button>
            <button type="button" id="email-button" class="email-btn">Email Report</button>
        </div>
        <div class="extra-emails" id="extra-emails">
            <label for="additional-emails">Additional recipients (comma‑separated):</label><br>
            <input type="text" id="additional-emails" placeholder="example@domain.com, another@site.org">
        </div>
    </form>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {
    /* ---------- Denominations & element references ---------- */
    const denominations = {
        // Bills
        hundreds:100, fifties:50, twenties:20, tens:10,
        fives:5, ones:1,
        // Coin rolls
        'quarter-rolls':10,   // 1 roll = $10
        'dime-rolls':5,       // 1 roll = $5
        'nickel-rolls':2,     // 1 roll = $2
        'penny-rolls':0.5,    // 1 roll = $0.50
        // Loose coins
        quarters:0.25, dimes:0.10,
        nickels:0.05, pennies:0.01,
        // New: Checks (special case, value is 1 because input is the total amount)
        checks: 1 
    };

    const inputs   = document.querySelectorAll('input[type="number"]');
    const totalEl  = document.getElementById('total');
    const removedEl= document.getElementById('removed-amount'); // New element
    const keepInp  = document.getElementById('keep-in-register'); // New element
    const clearBtn = document.getElementById('clear-button');
    const emailBtn = document.getElementById('email-button');
    const extraDiv = document.getElementById('extra-emails');
    const addInp   = document.getElementById('additional-emails');
    const form     = document.getElementById('cash-form');
    form.addEventListener('submit', e => e.preventDefault());

    /* ---------- Live total calculation ---------- */
    const calculateTotal = () => {
        let total = 0;
        // Calculate total from all monetary inputs (cash, rolls, checks)
        inputs.forEach(inp => {
            const val = denominations[inp.id];
            // Special handling for the 'keep-in-register' input as it's not a counted denomination
            if (inp.id !== 'keep-in-register') {
                const cnt = Math.max(parseFloat(inp.value) || 0, 0);
                total += cnt * val;
            }
        });
        
        total = Math.round(total * 100) / 100; // two‑decimal precision
        totalEl.textContent = `$${total.toFixed(2)}`;

        // Calculate amount to be removed
        const keepAmount = Math.max(parseFloat(keepInp.value) || 0, 0);
        let removedAmount = total - keepAmount;
        removedAmount = Math.round(removedAmount * 100) / 100;

        // Display removed amount, ensuring it doesn't go below $0.00
        removedEl.textContent = `$${Math.max(0, removedAmount).toFixed(2)}`;

        return total;
    };

    /* ---------- Build report (used for email) ---------- */
    const buildReport = (total) => {
        const lines = [];
        lines.push(`Cash Register Report – ${new Date().toLocaleString()}`);
        lines.push('----------------------------------------');
        const order = [
            // Bills
            'hundreds','fifties','twenties','tens','fives','ones',
            // Rolls
            'quarter-rolls','dime-rolls','nickel-rolls','penny-rolls',
            // Loose coins
            'quarters','dimes','nickels','pennies',
            // New: Checks
            'checks'
        ];
        const fmt = id => ({
            hundreds:'$100 bill', fifties:'$50 bill', twenties:'$20 bill',
            tens:'$10 bill', fives:'$5 bill', ones:'$1 bill',
            'quarter-rolls':'Quarter roll ($10)', 'dime-rolls':'Dime roll ($5)',
            'nickel-rolls':'Nickel roll ($2)', 'penny-rolls':'Penny roll ($0.50)',
            quarters:'Quarter ($0.25)', dimes:'Dime ($0.10)',
            nickels:'Nickel ($0.05)', pennies:'Penny ($0.01)',
            checks: 'Checks Total' // New format string
        })[id] || id;

        let grand = 0;
        order.forEach(id => {
            const inp = document.getElementById(id);
            const cnt = Math.max(parseFloat(inp.value) || 0, 0);
            if (cnt > 0 || (id === 'checks' && cnt > 0)) { // Include checks even if it's not a count
                const val = denominations[id] * cnt;
                grand += val;
                // For checks, we display the amount directly as the "count" is the total amount
                const countDisplay = id === 'checks' ? '1 ×' : `${cnt} ×`;
                lines.push(`${countDisplay} ${fmt(id)} = $${val.toFixed(2)}`);
            }
        });
        
        lines.push('----------------------------------------');
        lines.push(`TOTAL CASH/CHECKS: $${grand.toFixed(2)}`);

        // Add removed amount to the report
        const keepAmount = Math.max(parseFloat(keepInp.value) || 0, 0);
        const removedAmount = Math.max(0, grand - keepAmount);
        lines.push(`Amount to Keep in Register: $${keepAmount.toFixed(2)}`);
        lines.push(`AMOUNT TO BE REMOVED: $${removedAmount.toFixed(2)}`);

        return lines.join('\n');
    };

    /* ---------- Clear all fields ---------- */
    const clearAll = () => {
        inputs.forEach(i => i.value = '0');
        keepInp.value = '0.00'; // Clear the new keep input
        calculateTotal();
        extraDiv.style.display = 'none';
        addInp.value = '';
    };

    /* ---------- Show/hide extra‑email field ---------- */
    const toggleExtra = () => {
        extraDiv.style.display = extraDiv.style.display === 'none' ? 'block' : 'none';
        if (extraDiv.style.display === 'block') addInp.focus();
    };

    /* ---------- Send email ---------- */
    const sendEmail = () => {
        const total = calculateTotal();
        const report = buildReport(total);
        const extra = addInp.value.split(',').map(e => e.trim()).filter(e => e).join(',');
        // No default email address: 'to' will be empty if 'extra' is empty,
        // which prompts the user to enter a recipient in their email client.
        const to = extra; 

        /* ----- NEW: subject now includes a timestamp ----- */
        const now = new Date();
        const localeDate = now.toLocaleDateString();
        const localeTime = now.toLocaleTimeString([], {
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: false
        });
        const subjectText = `Cash Register Report – ${localeDate} ${localeTime}`;
        const subject = encodeURIComponent(subjectText);
        const body    = encodeURIComponent(report);

        // Uses 'to' which might be empty, allowing user to choose recipient
        window.location.href = `mailto:${to}?subject=${subject}&body=${body}`;
    };

    /* ---------- Input UX (focus/blur) ---------- */
    inputs.forEach(inp => {
        inp.addEventListener('focus', () => {
            // Check if the input value is a simple '0' or '0.00' before clearing on focus
            if (inp.value === '0' || inp.value === '0.00') inp.value = '';
        });
        inp.addEventListener('blur', () => {
            // Check if input is empty or invalid and reset to '0' or '0.00'
            const resetVal = ['checks', 'keep-in-register'].includes(inp.id) ? '0.00' : '0';
            if (inp.value.trim() === '' || isNaN(parseFloat(inp.value))) inp.value = resetVal;
            // Format to two decimal places for 'checks' and 'keep-in-register' if not '0'
            if (['checks', 'keep-in-register'].includes(inp.id) && parseFloat(inp.value) !== 0) {
                inp.value = parseFloat(inp.value).toFixed(2);
            }
        });
        inp.addEventListener('input', calculateTotal);
    });

    // Also attach the 'input' event to the new 'keep-in-register' field
    keepInp.addEventListener('input', calculateTotal);

    /* ---------- Button actions ---------- */
    clearBtn.addEventListener('click', clearAll);
    emailBtn.addEventListener('click', () => {
        // First click reveals extra‑recipients; second click sends
        if (extraDiv.style.display === 'none') {
            toggleExtra();
        } else {
            sendEmail();
        }
    });

    // Initialise total on load
    calculateTotal();
});
</script>
</body>
</html>
